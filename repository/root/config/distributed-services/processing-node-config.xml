<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE resources SYSTEM "../../../dtds/resources.dtd">
<resources>
   <resource id="mainNodeConfiguration"
      class="ro.zg.distributed.framework.cfg.ProcessingNodeConfiguration">
      <property name="groupName" value="NETCELL_SERVICES_TEST"></property>

      <property name="servicesConfiguration">
         <value>
            <list>
               <value>
                  <resource id="ENTITIES_MANAGER"
                     class="ro.zg.distributed.framework.cfg.DistributedServiceConfiguration">
                     <property name="name" value="ENTITIES_MANAGER"></property>
                     <property name="description"
                        value="Manages the netcell entities"></property>
<!--                     <property name="className"-->
<!--                        value="ro.zg.netcell.distributed.EntitiesManagerDistributedService"></property>-->
                     <property name="instance" value-ref="entitiesManagerDs"></property>
                     <property name="mandatory" value="true"></property>
                     <property name="maxNumberOfInstancesPerGroup"
                        value="1"></property>
                  </resource>
               </value>
               <value>
               <resource id="EXECUTION_ENGINE"
                     class="ro.zg.distributed.framework.cfg.DistributedServiceConfiguration">
                     <property name="name" value="EXECUTION_ENGINE"></property>
                     <property name="description"
                        value="Executes flows"></property>
                     <property name="instance" value-ref="executionEngineDs"></property>
                     <property name="mandatory" value="true"></property>
                     <property name="maxNumberOfInstancesPerGroup"
                        value="20000"></property>
<!--                      <property name="runtimeServiceConfig">-->
<!--                        <value>-->
<!--                           <resource id="engineRuntimeConfig" class="ro.zg.distributed.framework.cfg.RuntimeServiceConfiguration">-->
<!--                              <property name="propertiesConfig">-->
<!--                                 <value>-->
<!--                                    <list>-->
<!--                                       <value>-->
<!--                                          <resource id="engineEntitiesProp" class="ro.zg.distributed.framework.cfg.ServicePropertyConfig">-->
<!--                                             <property name="propertyName" value="entities"></property>-->
<!--                                             <property name="sourceServiceName" value="ENTITIES_MANAGER"></property>-->
<!--                                             <property name="methodName" value="getExecutableEntities"></property>-->
<!--                                          </resource>-->
<!--                                       </value>-->
<!--                                    </list>-->
<!--                                 </value>-->
<!--                              </property>-->
<!--                           </resource>-->
<!--                        </value>-->
<!--                      </property>  -->
                  </resource>
               </value>
               
                <value>
                  <resource id="MONITORING_MANAGER"
                     class="ro.zg.distributed.framework.cfg.DistributedServiceConfiguration">
                     <property name="name" value="MONITORING_MANAGER"></property>
                     <property name="description"
                        value="Monitors activity"></property>
                     <property name="instance" value-ref="monitoringManagerDs"></property>
                     <property name="mandatory" value="true"></property>
                     <property name="maxNumberOfInstancesPerGroup"
                        value="1"></property>
                  </resource>
               </value>
               
               <value>
                  <resource id="SCHEDULER" class="ro.zg.distributed.framework.cfg.DistributedServiceConfiguration">
                  <property name="name" value="SCHEDULER"></property>
                     <property name="description"
                        value="Schedules job execution"></property>
                     <property name="instance" value-ref="scheduledJobsManagerDs"></property>
                     <property name="mandatory" value="true"></property>
                     <property name="maxNumberOfInstancesPerGroup"
                        value="1"></property>
                  </resource>
               </value>
            </list>
         </value>
      </property>
   </resource>
   
   <!-- distributed services -->
   
   <resource id="entitiesManagerDs" class="ro.zg.distributed.framework.ReflectionBasedDistributedService">
      <property name="targetObject" value-ref="entitiesManager"></property>
      <property name="argumentsForMethods">
         <value>
            <map>
               <entry key="createEntity.1">
                  <value>
                     <list>
                        <value>ro.zg.netcell.vo.definitions.EntityDefinition</value>
                     </list>
                  </value>
               </entry>
                
               <entry key="updateEntity.1">
                  <value>
                     <list>
                        <value>ro.zg.netcell.vo.definitions.EntityDefinition</value>
                     </list>
                  </value>
               </entry>
               <entry key="removeEntity.1">
                  <value>
                     <list>
                        <value>ro.zg.netcell.vo.definitions.EntityDefinition</value>
                     </list>
                  </value>
               </entry>
            </map>
         </value>
      </property>
   </resource>
   
   <resource id="executionEngineDs" class="ro.zg.distributed.framework.ReflectionBasedDistributedService">
      <property name="targetObject" value-ref="executionEngineController"></property>
      <property name="argumentsForMethods">
         <value>
            <map>
               <entry key="execute.1">
                  <value>
                     <list>
                        <value>ro.zg.util.data.GenericNameValueContext</value>
                     </list>
                  </value>
               </entry>
            </map>
         </value>
      </property>
   </resource>
   
<!--   <resource id="executionEngineDs" class="ro.zg.netcell.distributed.ExecutionEngineDS">-->
<!--      <property name="engine" value-ref="executionEngineController"></property>-->
<!--   </resource>-->
   
   <resource id="monitoringManagerDs" class="ro.zg.distributed.framework.ReflectionBasedDistributedService">
      <property name="targetObject" value-ref="monitoringManager"></property>
      <property name="setResourceLoaderOnStart" value="false"></property>
      <property name="callInitOnStart" value="false"></property>
   </resource>
   
   <resource id="scheduledJobsManagerDs" class="ro.zg.distributed.framework.ReflectionBasedDistributedService">
      <property name="targetObject" value-ref="scheduledJobsManager"></property>
      <!-- init is called by the entities manager -->
      <property name="callInitOnStart" value="false"></property>
   </resource>
   
</resources>
