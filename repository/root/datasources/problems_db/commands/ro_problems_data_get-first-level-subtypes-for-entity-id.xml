<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE command SYSTEM "../../../../dtds/script-dao-commands.dtd">
<command name="ro.problems.data.get-first-level-subtypes-for-entity-id" type="SQL.QUERY">
         <parameters>
                     <parameter name="entityId" />
               </parameters>
      <script>
      select 
cet2.id
,cet2.complex_type complex_subtype
,cet2.complex_type simple_subtype 
from 
entities e
, complex_entity_type cet
, entity_types_relations ctr
, complex_entity_type cet2
where 
e.complex_entity_type_id=cet.id
and e.complex_entity_type_id = ctr.source_entity_type_id
and ctr.target_entity_type_id = cet2.id
and e.id=$entityId
   </script>
</command>